local combat = Combat()
combat:setParameter(COMBAT_PARAM_TYPE, COMBAT_PHYSICALDAMAGE)
combat:setParameter(COMBAT_PARAM_DISTANCEEFFECT, 15)

local spell = Spell("instant")

function spell.onCastSpell(creature, variant)
   local player = creature:getMaster()
   local mxMana, mxHealth, ml, lvl = player:getMaxMana(), player:getMaxHealth(), player:getMagicLevel(),                player:getLevel()
   local formula = math.floor(ml * 10 + mxMana * 0.5)
   local poison = Condition(CONDITION_POISON)
   poison:setParameter(CONDITION_PARAM_DELAYED, true)
   poison:addDamage(10, 500, -formula/30)
   player:getTarget():addCondition(poison)
   creature:setItemOutfit(31577, 1)
    return combat:execute(creature, variant)
end

spell:group("attack")
spell:id(2000)
spell:name("Venom Pox")
--spell:words("Ember")
--spell:level(35)
--spell:mana(10)
--spell:isPremium(false)
spell:range(8)
spell:needCasterTargetOrDirection(true)
spell:isBlockingWalls(true)
spell:cooldown(1000)
spell:groupCooldown(1000)
spell:needLearn(false)
--spell:vocation("sorcerer;true", "druid;true", "master sorcerer", "elder druid")
spell:register()